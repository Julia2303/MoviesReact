(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{39:function(e,t,i){},64:function(e,t,i){"use strict";i.r(t);var a=i(1),c=i.n(a),o=i(30),n=i.n(o),s=(i(39),i(8)),r=i(0),l=function(e){return Object(r.jsxs)("svg",Object(s.a)(Object(s.a)({width:"25",height:"25",viewBox:"0 0 10 6",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[Object(r.jsx)("g",{children:Object(r.jsx)("path",{d:"M10 1.12737L8.87263 -4.92788e-08L5.16842 3.70421L1.46421 -3.73111e-07L0.336842 1.12737L5.16842 5.95895L10 1.12737Z"})}),Object(r.jsx)("defs",{children:Object(r.jsx)("clipPath",{children:Object(r.jsx)("path",{d:"M10 0L10 6L-2.62268e-07 6L0 -4.37114e-07L10 0Z"})})})]}))},d=i(10),u=function(){return Object(r.jsxs)("header",{className:"header",children:[Object(r.jsxs)(d.b,{to:"/",className:"header__logo",children:[Object(r.jsx)("img",{className:"header__logo-image",src:"/images/header-logo.svg",alt:""}),Object(r.jsx)("p",{className:"header__logo-text",children:"Movies"})]}),Object(r.jsx)(d.b,{to:"/favourites",className:"header__account-link",children:Object(r.jsxs)("button",{className:"header__button",children:[Object(r.jsx)("span",{className:"hide-on-mobile",children:"My Account"}),Object(r.jsx)(l,{className:"header__button-icon"})]})})]})},m=i(11),j=i(34),v=function(e,t){switch(t.type){case"ADD_MOVIE_TO_FAVOURITES":return Object(s.a)(Object(s.a)({},e),{},{favouriteMovies:[t.payload].concat(Object(j.a)(e.favouriteMovies))});case"REMOVE_MOVIE_FROM_FAVOURITE":return Object(s.a)(Object(s.a)({},e),{},{favouriteMovies:e.favouriteMovies.filter((function(e){return e.id!==t.payload}))});default:return e}},b=i(33),_=i.n(b),O={favouriteMovies:function(){var e=localStorage.getItem("favouriteMovies");return e?JSON.parse(e):[]}()},h=Object(a.createContext)(O),f=function(e){var t=e.children,i=Object(a.useReducer)(v,O),c=Object(m.a)(i,2),o=c[0],n=c[1],s=Object(a.useState)([]),l=Object(m.a)(s,2),d=l[0],u=l[1],j=Object(a.useState)(1),b=Object(m.a)(j,2),f=b[0],x=b[1],p=Object(a.useState)(0),N=Object(m.a)(p,2),g=N[0],M=N[1],F=Object(a.useState)(null),I=Object(m.a)(F,2),C=I[0],k=I[1];Object(a.useEffect)((function(){_.a.get("https://api.themoviedb.org/3/movie/now_playing?api_key=".concat("ebea8cfca72fdff8d2624ad7bbf78e4c","&language=en-US&page=").concat(f)).then((function(e){u(e.data.results),M(e.data.total_pages),window.scrollTo(0,0),C&&k(e.data.results[0].id)}))}),[f]);Object(a.useEffect)((function(){!function(e){var t=JSON.stringify(e);localStorage.setItem("favouriteMovies",t)}(o.favouriteMovies)}),[o]);return Object(r.jsx)(h.Provider,{value:{movieList:d,setMovieList:u,currentPage:f,setCurrentPage:x,totalPages:g,setTotalPages:M,paginate:function(e){return x(e)},favouriteMovies:o.favouriteMovies,addToFavourite:function(e){n({type:"ADD_MOVIE_TO_FAVOURITES",payload:e})},checkMovieInFavourites:function(e){return o.favouriteMovies.find((function(t){return t.id===e}))},removeFromFavouriteById:function(e){n({type:"REMOVE_MOVIE_FROM_FAVOURITE",payload:e})},currentMovieId:C,setCurrentMovieId:k},children:t})},x=function(e){var t=e.className,i=Object(a.useContext)(h),c=i.currentPage,o=i.paginate,n=i.totalPages,s=function(e){return c>=e?" pagination__button--removed":""},l=Object(a.useMemo)((function(){return c===n||c===n-1?[n-1,n]:[c,c+1,c+2]}),[c,n]);return Object(r.jsxs)("div",{className:"pagination ".concat(t),children:[Object(r.jsx)("button",{onClick:function(){o(1)},className:"pagination__button",children:"First"}),Object(r.jsx)("button",{onClick:function(){o(c-1)},className:"pagination__button".concat(1===c?" pagination__button--disabled":""),children:"Prev"}),l.map((function(e){return Object(r.jsx)("button",{onClick:function(){return o(e)},className:"pagination__button".concat(c===e?" pagination__button--active":""),children:Object(r.jsx)("span",{children:e})},e)})),Object(r.jsx)("button",{className:"pagination__button".concat(s(n-2)),children:"..."}),Object(r.jsx)("button",{onClick:function(){o(c+1)},className:"pagination__button".concat(s(n)),children:"Next"}),Object(r.jsx)("button",{onClick:function(){o(n)},className:"pagination__button".concat(s(n)),children:"Last"})]})},p=function(e){return"".concat("https://image.tmdb.org/t/p/w300").concat(e)},N=function(e){var t,i=e.movie,a=e.onClose,c=e.onNextMovie,o=e.isMovieInFavourites,n=e.addToFavourite,s=e.removeFromFavourite;return Object(r.jsx)("div",{className:"movie-modal",style:{backgroundImage:"url(".concat((t=i.backdrop_path,"".concat("https://image.tmdb.org/t/p/w500").concat(t)),")")},children:Object(r.jsxs)("div",{className:"movie-modal__container",children:[Object(r.jsxs)("header",{className:"movie-modal__header",children:[Object(r.jsxs)("div",{className:"movie-modal__header-button",onClick:a,children:[Object(r.jsx)(l,{className:"movie-modal__header-icon"}),Object(r.jsxs)("p",{className:"movie-modal__header-button-text",children:["Back ",Object(r.jsx)("span",{className:"hide-on-mobile",children:"to List"})]})]}),Object(r.jsxs)("div",{className:"movie-modal__header-button",onClick:c,children:[Object(r.jsxs)("p",{className:"movie-modal__header-button-text",children:["Next ",Object(r.jsx)("span",{className:"hide-on-mobile",children:"Movie"})]}),Object(r.jsx)(l,{className:"movie-modal__header-icon"})]})]}),Object(r.jsxs)("div",{className:"movie-modal__content",children:[Object(r.jsx)("img",{className:"movie-modal__poster",src:p(i.poster_path)}),Object(r.jsxs)("div",{className:"movie-modal__info",children:[o?Object(r.jsxs)("button",{className:"movie-modal__button",onClick:s,children:["Remove ",Object(r.jsx)("span",{className:"hide-on-mobile",children:"from favourite"})]}):Object(r.jsxs)("button",{className:"movie-modal__button",onClick:n,children:["Add ",Object(r.jsx)("span",{className:"hide-on-mobile",children:"to favourite"})]}),Object(r.jsx)("h2",{className:"movie-modal__title",children:i.title}),Object(r.jsxs)("div",{className:"movie-modal__details",children:[Object(r.jsxs)("div",{className:"movie-modal__score",children:[Object(r.jsx)("p",{className:"movie-modal__details-title",children:"Score: "}),Object(r.jsx)("p",{className:"movie-modal__details-value",children:i.vote_average.toFixed(1)})]}),Object(r.jsxs)("div",{className:"movie-modal__release-date",children:[Object(r.jsx)("p",{className:"movie-modal__details-title",children:"Release Date: "}),Object(r.jsx)("p",{className:"movie-modal__details-value",children:i.release_date})]})]})]}),Object(r.jsx)("h2",{className:"movie-modal__title movie-modal__title--mobile",children:i.title}),Object(r.jsx)("div",{className:"movie-modal__description-container",children:Object(r.jsx)("p",{className:"movie-modal__description",children:i.overview})})]})]})})},g=i(20),M=function(e){var t=e.children,i=Object(a.useRef)();return Object(a.useEffect)((function(){var e=i.current;return Object(g.a)(e),function(){return Object(g.b)(e)}}),[]),Object(r.jsx)("div",{className:"modal",ref:i,children:t})},F=function(){var e=Object(a.useContext)(h),t=e.movieList,i=e.currentPage,c=e.setCurrentPage,o=e.checkMovieInFavourites,n=e.addToFavourite,s=e.removeFromFavouriteById,l=e.currentMovieId,d=e.setCurrentMovieId,u=function(e){e.currentTarget.src="/images/movie-poster.jpg"},m=t.find((function(e){return e.id===l}));return Object(r.jsxs)("main",{className:"main",children:[Object(r.jsx)("p",{className:"main__title",children:"Latest Releases"}),Object(r.jsx)("div",{className:"movie-list",children:t.map((function(e){return Object(r.jsx)("div",{className:"movie-list__movie",children:Object(r.jsx)("img",{src:p(e.poster_path),onError:u,alt:"",className:"movie-list__movie-image",title:e.title,onClick:function(){return t=e.id,void d(t);var t}})},e.id)}))}),Object(r.jsx)(x,{className:"main__pagination"}),m&&Object(r.jsx)(M,{children:Object(r.jsx)(N,{movie:m,onClose:function(){return d(null)},onNextMovie:function(){if(l===t[t.length-1].id)c(i+1);else{var e=t.reduce((function(e,i,a){return l===i.id&&(e=t[a+1].id),e}),null);d(e)}},isMovieInFavourites:o(l),addToFavourite:function(){n(m)},removeFromFavourite:function(){s(l)}})})]})},I=i(2),C=function(){var e=Object(a.useContext)(h),t=e.favouriteMovies,i=e.removeFromFavouriteById,c=e.checkMovieInFavourites,o=e.currentMovieId,n=e.setCurrentMovieId,s=function(){if(o===t[t.length-1].id)n(t[0].id);else{var e=t.reduce((function(e,i,a){return o===i.id&&(e=t[a+1].id),e}),null);n(e)}};return Object(r.jsxs)("main",{className:"main",children:[Object(r.jsx)("p",{className:"main__title",children:"My favourite"}),Object(r.jsx)("div",{className:"favourite-movies",children:t.map((function(e){return Object(r.jsxs)("div",{className:"favourite-movies__movie",children:[Object(r.jsx)("img",{src:p(e.poster_path),alt:"",className:"favourite-movies__image",title:e.title,onClick:function(){return t=e.id,void n(t);var t}}),Object(r.jsxs)("div",{className:"favourite-movies__info",children:[Object(r.jsxs)("div",{className:"favourite-movies__top-info",children:[Object(r.jsx)("h2",{className:"favourite-movies__title",children:e.title}),Object(r.jsx)("button",{className:"favourite-movies__button",onClick:function(){return i(e.id)},children:"Unfavourite"})]}),Object(r.jsx)("div",{className:"favourite-movies__description-container",children:Object(r.jsx)("p",{className:"favourite-movies__description",children:e.overview})})]})]},e.id)}))}),o&&Object(r.jsx)(M,{children:Object(r.jsx)(N,{movie:t.find((function(e){return e.id===o})),onClose:function(){return n(null)},onNextMovie:s,isMovieInFavourites:c(o),removeFromFavourite:function(){i(o),t.length>1?s():n(null)}})})]})};var k=function(){return Object(r.jsx)(f,{children:Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)(u,{}),Object(r.jsx)(I.a,{exact:!0,path:"/",component:F}),Object(r.jsx)(I.a,{path:"/favourites",component:C})]})})};n.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(d.a,{children:Object(r.jsx)(k,{})})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.13ce535e.chunk.js.map